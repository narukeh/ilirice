#!/bin/sh

# Shows the current moon phase. Requires `pom from bsd-games

mnphs=$(pom $1 | grep -o 'New\|Waxing Crescent\|First Quarter\|Waxing Gibbous\|Full\|Waning Gibbous\|Last Quarter\|Waning Crescent' | grep -m1 '.')
prcnt=$(pom $1 | grep -o '[[:digit:]]*%' )
case "$mnphs" in
	"New") icon="ðŸŒ‘" prcnt="0%" ;;
	"Waxing Crescent") icon="ðŸŒ’" ;;
	"First Quarter") icon="ðŸŒ“" prcnt="50%" ;;
	"Waxing Gibbous") icon="ðŸŒ”" ;;
	"Full") icon="ðŸŒ•" prcnt="100%" ;;
	"Waning Gibbous") icon="ðŸŒ–" ;;
	"Last Quarter") icon="ðŸŒ—" prcnt="50%" ;;
	"Waning Crescent") icon="ðŸŒ˜" ;;
	*) echo exit 1 ;;
esac

case $BLOCK_BUTTON in
	3) notify-send "ðŸŒœ Moon phase module" "$icon $mnphs $prcnt" ;;
	6) "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

printf "%s%s\n" "$icon" "$prcnt"
